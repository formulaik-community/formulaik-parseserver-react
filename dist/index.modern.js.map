{"version":3,"file":"index.modern.js","sources":["../src/whereSingle/index.js","../src/wheres/index.js","../src/parseQuery/index.js","../src/parseObjectAutoComplete/index.js","../src/index.js"],"sourcesContent":["import React, { useState } from 'react'\nimport Formulaik from 'formulaik'\nimport FormulaikMui from 'formulaik-mui'\nimport * as Yup from 'yup'\n// import Button from '@mui/material/Button'\n\nexport default (props) => {\n    const {\n        values,\n        customOnValueChanged,\n        errors,\n        item: { id, props: itemProps }\n    } = props\n\n    const [error, setError] = useState(null)\n    const item = values[id]\n    const { fields } = itemProps\n\n    const validationSchema = () => {\n        return Yup.object().shape({\n            fieldName: Yup.string()\n                .required(\"This field can't be blank\"),\n            constraint: Yup.string()\n                .required(\"This field can't be blank\"),\n            value: Yup.string()\n                .required(\"This field can't be blank\"),\n        })\n    }\n\n    const fieldNameOptions = () => {\n        const items = [{ label: '', value: null }]\n        Object.keys(fields).forEach(key => {\n            if (['ACL'].includes(key)) {\n                return\n            }\n            const _item = { label: key, value: key }\n            items.push(_item)\n        })\n        return items\n    }\n\n    const inputTypeFromFieldType = (data) => {\n        if (!data) {\n            return {\n                type: 'input',\n            }\n        }\n\n        const { type } = data\n        switch (type) {\n            default:\n            case 'String':\n                return {\n                    type: 'input',\n                }\n            case 'Date':\n                return {\n                    type: 'datePicker',\n                }\n        }\n    }\n    const formItemsProvider = [\n        {\n            isMulti: true,\n            className: 'flex',\n            items: [\n                {\n                    type: 'select',\n                    schema: 'fieldName',\n                    id: 'fieldName',\n                    label: 'Field name',\n                    className: 'w-1/3 ml-2 mr-2',\n                    props: {\n                        options: fieldNameOptions()\n                    }\n                },\n                {\n                    type: 'select',\n                    schema: 'constraint',\n                    id: 'constraint',\n                    label: 'Constraint',\n                    className: 'w-1/3 ml-2 mr-2',\n                    props: {\n                        options: [\n                            { label: \"equalTo\", value: 'equalTo' },\n                            // { label: \"notEqualTo\", value: 'notEqualTo' },\n                            { label: \"greaterThan\", value: 'greaterThan' },\n                            // { label: \"greaterThanOrEqualTo\", value: 'greaterThanOrEqualTo' },\n                            // { label: \"lessThan\", value: 'lessThan' },\n                            // { label: \"lessThanOrEqualTo\", value: 'lessThanOrEqualTo' },\n                            // { label: \"containedIn\", value: 'containedIn' },\n                            // { label: \"notContainedIn\", value: 'notContainedIn' },\n                            { label: \"exists\", value: 'exists' },\n                            { label: \"doesNotExist\", value: 'doesNotExist' },\n                        ]\n                    }\n                },\n                {\n                    ...(inputTypeFromFieldType(item)),\n                    schema: 'value',\n                    id: 'value',\n                    label: 'Value',\n                    className: 'w-1/3 ml-2',\n                }\n            ]\n        },\n\n    ]\n\n\n    const initialValues = item ? item : {}\n\n    const onValuesChanged = (__values) => {\n        const result = { ...item, ...__values }\n        if (__values.fieldName) {\n            const struct = fields[__values.fieldName]\n            if (struct) {\n                result.type = struct.type\n            }\n        }\n        customOnValueChanged && customOnValueChanged(result)\n    }\n\n    const handleRemove = () => {\n        if (itemProps && itemProps.handleRemove) {\n            itemProps.handleRemove({ id })\n        }\n\n    }\n\n    // return <div className=\"flex\">\n    //     <div className=\"w-full mr-2\">\n    return <Formulaik\n        componentsLibraries={[FormulaikMui]}\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        formItemsProvider={formItemsProvider}\n        onValuesChanged={onValuesChanged}\n        error={error} />\n    //     </div>\n    //     <div className=\"flex justify-end\">\n    //         <Button onClick={handleRemove} className={'h-16'}>-</Button>\n    //     </div>\n    // </div>\n}","import React, { useState, useRef, useEffect } from 'react'\nimport Formulaik from 'formulaik'\nimport WhereComponent from '../whereSingle'\nimport FormulaikMui from 'formulaik-mui'\nimport * as Yup from 'yup'\nimport CircularProgress from '@mui/material/CircularProgress'\nimport _ from 'underscore'\nimport shortid from 'shortid'\n\nexport default (props) => {\n  const {\n    values,\n    customOnValueChanged,\n    item: { id, props: itemProps }\n  } = props\n\n  const _value = values[id]\n  if (!_value || _.isEmpty(_value)) {\n    const _placeHolder = { id: shortid.generate() }\n    const val = {}\n    val[_placeHolder.id] = _placeHolder\n    customOnValueChanged && customOnValueChanged(val)\n    return <div className=\"w-full border-warmGray-400 border-2 px-5 py-6 rounded-xl\">\n      <div className=\"w-full justify-center flex\">\n        <CircularProgress />\n      </div>\n    </div>\n  }\n\n  useEffect(() => {\n    updateValues({ values: values[id], force: false })\n  }, [])\n\n\n  const [error, setError] = useState(null)\n  const { schema } = itemProps\n\n  const validationSchema = () => {\n    return Yup.object().shape()\n  }\n\n  const handleRemove = ({ id: _id }) => {\n    if (!_id || !values || !values[id]) {\n      return\n    }\n    const _value = values[id]\n\n    if (!_value || !_value[_id]) {\n      return\n    }\n    const __value = { ..._value }\n    delete __value[_id]\n    updateValues({ values: __value })\n  }\n\n  const formItemsProvider = () => {\n    const { fields } = schema\n    const items = wheresToArray()\n    return items.map((item, i) => ({\n      type: 'where',\n      id: item.id,\n      props: {\n        fields,\n        handleRemove\n      }\n    }))\n  }\n\n\n  const initialValues = () => {\n    const items = wheresToArray()\n    const _items = {}\n    const _value = values[id]\n    const ids = items.map(item => item.id)\n    for (var i = 0; i < ids.length; i++) {\n      const _id = ids[i]\n      const val = _value[_id]\n      _items[_id] = { id: _id, ...(val ? val : {}) }\n    }\n\n    return _items\n  }\n\n\n\n  const wheresToArray = () => {\n\n    const _value = values[id]\n\n    return _.map(_value, (value, key) => {\n\n      const _v = {\n        ...value,\n      }\n      if (!_v.id) {\n        _v.id = key\n      }\n      return _v\n    })\n  }\n\n  const onValuesChanged = (_values) => {\n\n    updateValues({ values: _values })\n  }\n\n  const updateValues = ({ values: _values, force = true }) => {\n    const _placeHolder = { id: shortid.generate() }\n\n    var placeholderExists = _.findWhere(_.values(_values), { fieldName: undefined })\n    if (!placeholderExists) {\n      placeholderExists = _.findWhere(_.values(_values), { fieldName: null })\n    }\n\n    if (!placeholderExists) {\n      _values[_placeHolder.id] = _placeHolder\n    }\n\n    if (placeholderExists && !force) {\n      return\n    }\n    customOnValueChanged && customOnValueChanged(_values)\n  }\n\n  const componentsLibrary = ({ type }) => {\n    switch (type) {\n      case 'where':\n        return WhereComponent\n      default:\n        return null\n    }\n  }\n\n  // const handleAdd = () => {\n\n  // }\n\n  return <div className=\"w-full\">\n    <Formulaik\n      componentsLibraries={[componentsLibrary, FormulaikMui]}\n      initialValues={initialValues}\n      validationSchema={validationSchema}\n      formItemsProvider={formItemsProvider}\n      onValuesChanged={onValuesChanged}\n      error={error} />\n    {/* <div className=\"grid grid-cols-2 justify-between \">\n            <div className=\"\">\n                <Button onClick={handleAdd} className={'mr-4'}>Add</Button>\n            </div>\n            <div className=\"flex justify-end mr-4\">\n\n            </div>\n        </div> */}\n  </div>\n}\n","import React, { useState, useRef, useEffect } from 'react'\nimport Formulaik from 'formulaik'\nimport FormulaikMui from 'formulaik-mui'\nimport * as Yup from 'yup'\nimport Button from '@mui/material/Button'\nimport CircularProgress from '@mui/material/CircularProgress'\n\nimport _ from 'underscore'\nimport shortid from 'shortid'\nimport ReactJson from 'react-json-view-ssr'\n\nimport Accordion from '@mui/material/Accordion'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore'\n\n\n\nimport WheresComponent from '../wheres'\nconst componentsLibrary = ({ type }) => {\n    switch (type) {\n        case 'wheres':\n            return WheresComponent\n        default:\n            return null\n    }\n}\n\n\nconst fetchSchemas = async () => {\n    //return Parse.Schema.all()\n    const result = await Parse.Cloud.run('schema')\n    console.log('schema: ', result)\n    return result\n}\n\nexport default (props) => {\n    const {\n        values,\n        customOnValueChanged,\n        errors,\n\n        item: { id, label, props: itemProps }\n    } = props\n\n    const schemas = useRef()\n    const [error, setError] = useState(null)\n\n\n    const [queryResult, setQueryResult] = useState(null)\n\n    const buildSchemas = async () => {\n        if (schemas.current) {\n            return\n        }\n\n        const items = await fetchSchemas()\n        const { classNameInclude = null, classNameExclude = ['_Installation', '_Session'] } = itemProps\n        if (classNameInclude) {\n            schemas.current = _.filter(items, item => classNameInclude.includes(item.className))\n        } else {\n            schemas.current = _.filter(items, item => !classNameExclude.includes(item.className))\n        }\n\n    }\n\n    useEffect(() => {\n        buildSchemas()\n    }, [])\n\n    useEffect(() => {\n        updateQueryResult()\n    }, [values])\n\n\n    const { query, className, accessor, key, dependsOnUser, userAccessor, } = (values && values[id]) ? values[id] : {}\n\n    const validationSchema = () => {\n        if (!query) {\n            return Yup.object().shape({\n                className: Yup.string().nullable(),\n            })\n        }\n\n        return Yup.object().shape({\n            // limit: Yup.number()\n            //     .required(\"This field can't be blank\"),\n            // skip: Yup.number()\n            //     .required(\"This field can't be blank\"),\n            className: Yup.string().nullable(),\n        })\n    }\n\n    const fieldNameOptions = () => {\n        if (!query || !schemas.current) {\n            return []\n        } const _schema = _.findWhere(schemas.current, { className })\n        if (!_schema) {\n            return []\n        }\n        const { fields } = _schema\n        const items = [{ label: '', value: null }]\n        Object.keys(fields).forEach(key => {\n            if (['ACL'].includes(key)) {\n                return\n            }\n            const _item = { label: key, value: key }\n            items.push(_item)\n        })\n        return items\n    }\n\n    const formItemsProvider = () => {\n        const classNameItem = {\n            type: 'autocomplete',\n            schema: 'className',\n            id: 'className',\n            label: 'Classname',\n            className: 'w-1/3',\n            props: {\n                fetcher: async ({ value }) => {\n                    const items = schemas.current\n                    const _i = items.map(i => i.className)\n                    return _i\n                },\n                isOptionEqualToValue: (option, value) => {\n                    return (option === value)\n                },\n                getOptionLabel: (option) => {\n                    const name = option\n                    return `${name}`\n                },\n                disabled: itemProps.blockClassName\n            }\n        }\n\n        if (!query) {\n            return [classNameItem]\n        }\n\n        return [\n            classNameItem,\n            // {\n            //     type: 'html',\n            //     id: 'html',\n            //     props: {\n            //         content: <b><i>{'Please be aware these queries will run everytime you fetch a campaing.'}</i></b>\n            //     }\n            // },\n            ...(itemProps.showCustomKey ? [\n                {\n                    type: 'input',\n                    schema: 'key',\n                    id: 'key',\n                    label: 'Custom Key',\n                    className: 'w-1/3',\n                    props: { helperText: 'The prefix to this data query. Defaults to classname' }\n                },\n            ] : []),\n            ...(itemProps.showDependsOnUser ? [{\n                isMulti: true,\n                className: 'flex',\n                items: [\n                    {\n                        type: 'checkbox',\n                        schema: 'dependsOnUser',\n                        id: 'dependsOnUser',\n                        label: 'Depends on user',\n                        className: 'w-2/3 mr-2',\n                        props: {\n                            subLabel: \"Whether the query depends on the user queried from the target audience\"\n                        }\n                    },\n                    // ...((values[id] && values[id]['dependsOnUser']) ? [\n                    ...(true ? [\n                        {\n                            type: 'input',\n                            schema: 'userAccessor',\n                            id: 'userAccessor',\n                            label: 'User Accessor',\n                            className: 'w-1/3 ml-2',\n                            props: { helperText: 'The path to matching the user in this data query' }\n                        },\n                    ] : []),\n                ]\n            }] : []),\n            {\n                type: 'input',\n                schema: 'accessor',\n                id: 'accessor',\n                label: 'Data accessor ',\n                className: 'w-1/3',\n                props: { helperText: '(advanced)' }\n            },\n            {\n                type: 'divider',\n                id: 'divider',\n                props: {\n                    content: <b><i>{'Wheres'}</i></b>\n                }\n            },\n            {\n                type: 'wheres',\n                id: 'wheres',\n                props: {\n                    schema: (query && schemas.current) ? _.findWhere(schemas.current, { className }) : null\n                }\n            },\n            {\n                type: 'divider',\n                id: 'divider',\n                props: {\n                    content: <b><i>{'Generic constraints'}</i></b>\n                }\n            },\n            ...(itemProps.showLimit ? [{\n                isMulti: true,\n                className: 'flex',\n                items: [\n                    {\n                        type: 'input',\n                        schema: 'limit',\n                        id: 'limit',\n                        label: 'Limit',\n                        className: 'w-1/3',\n                        props: { helperText: 'This limit will be applied to the job. If unlimited, leave blank.' }\n                    },\n                    // {\n                    //     type: 'input',\n                    //     schema: 'skip',\n                    //     id: 'skip',\n                    //     label: 'Skip',\n                    //     className: 'w-1/2 ml-2',\n                    // }\n                ]\n            }] : []),\n            {\n                isMulti: true,\n                className: 'flex',\n                items: [\n                    {\n                        type: 'select',\n                        schema: 'sortDirection',\n                        id: 'sortDirection',\n                        label: 'Sort direction',\n                        className: 'w-1/3 ',\n                        props: {\n                            options: [\n                                { label: null, value: null },\n                                { label: \"desc\", value: 'desc' },\n                                { label: \"asc\", value: 'asc' },\n                            ]\n                        }\n                    },\n\n                    {\n                        type: 'divider',\n                        id: 'divider',\n                        props: {\n                            vertical: true,\n                            content: <b>{'For'}</b>\n                        }\n                    },\n                    {\n                        type: 'select',\n                        schema: 'sortField',\n                        id: 'sortField',\n                        label: 'sortField',\n                        className: 'w-2/3',\n                        props: {\n                            options: fieldNameOptions()\n                        }\n                    },\n                ]\n            },\n\n            {\n                type: 'input',\n                schema: 'include',\n                id: 'include',\n                label: 'Inclusions',\n                props: { helperText: ' (in the form of [\"fieldA\", \"fieldB.fieldC\"])' }\n            },\n            {\n                type: 'input',\n                schema: 'exclude',\n                id: 'exclude',\n                label: 'Exclusions (in the form of [\"classNameA\", \"classNameB.classNameC\"])',\n                props: { helperText: ' (in the form of [\"fieldA\", \"fieldB.fieldC\"])' }\n            },\n            // {\n            //     type: 'JSONEditor',\n            //     schema: 'mock_',\n            //     label: 'mock_',\n            //     id: 'mock_',\n            //     forceLabel: true,\n            //     props: {\n            //         options: {},\n            //         mode: 'json',\n            //         height: '40px',\n            //     }\n            // },\n        ]\n    }\n\n    const adaptInitialWheres = () => {\n        if (!query) {\n            return {}\n        }\n\n        const where = query.toJSON().where\n        const result = {}\n        Object.keys(where).forEach(key => {\n            const id = shortid.generate()\n            result[id] = {\n                id,\n                fieldName: key,\n                value: where[key],\n                constraint: 'equalTo',\n            }\n        })\n        return result\n    }\n\n    const sortDirection = () => {\n        const def = null\n        if (!query) {\n            return def\n        }\n        const order = query._order\n        if (!order || order.length === 0) {\n            return def\n        }\n        var first = order[0]\n        if (!first || first.trim().length === 0) {\n            return def\n        }\n\n        first = first.trim()\n        var value = \"asc\"\n        var label = \"asc\"\n        if (first.charAt(0) === '-') {\n            value = \"desc\"\n            label = \"desc\"\n        }\n        return value\n    }\n\n    const sortField = () => {\n        const def = null\n        if (!query) {\n            return def\n        }\n        const order = query._order\n        if (!order || order.length === 0) {\n            return def\n        }\n        var first = order[0]\n        if (!first || first.trim().length === 0) {\n            return def\n        }\n\n        first = first.trim()\n\n        if (first.charAt(0) === '-') {\n            first = first.substring(1, first.length)\n        }\n\n        return first\n    }\n\n\n    const initialValues = {\n        className,\n        key,\n        dependsOnUser,\n        userAccessor,\n        accessor,\n        wheres: adaptInitialWheres(),\n        limit: query ? query._limit : 10,\n        //skip: query ? query._skip : 0,\n        include: query ? JSON.stringify(query._include) : '[]',\n        exclude: query ? JSON.stringify(query._exclude) : '[]',\n\n        sortDirection: sortDirection(),\n        sortField: sortField()\n    }\n\n    const updateQueryResult = async () => {\n        if (itemProps.hideQueryResult) {\n            return\n        }\n\n        if (!query) {\n            return\n        }\n\n        const _query = query\n        _query.withCount()\n        const item = await _query.find()\n        setQueryResult(item)\n    }\n\n    const onValuesChanged = (__values) => {\n        const { className } = __values\n        //console.log('__values: ', __values)\n\n        if (!className) {\n            customOnValueChanged && customOnValueChanged({ query: null, className: null, accessor: null })\n            return\n        }\n\n        var _item = query\n        if (!_item || _item.className !== className) {\n            _item = new Parse.Query(className)\n        }\n        applyQueryConstraints({ query: _item, values: __values })\n        updateQueryResult()\n        if (itemProps.showDependsOnUser) {\n            const _dependsOnUser = values[id] ? values[id]['dependsOnUser'] : null\n\n        }\n\n        customOnValueChanged && customOnValueChanged({ query: _item, ...__values })\n    }\n\n    const onRemove = async () => {\n        if (itemProps.onRemove) { itemProps.onRemove() }\n    }\n\n    const onClear = async () => {\n        onValuesChanged({})\n    }\n\n    const handleQueryValueWithType = (value, type) => {\n        switch (type) {\n            case 'Date': {\n\n            }\n            default: break\n        }\n        return value\n    }\n\n    const applyQueryConstraints = ({ query, values } = {}) => {\n        if (!query) {\n            return\n        }\n        query._where = {}\n        query.order = []\n\n        const { wheres, limit, skip, include, exclude, sortDirection, sortField } = values\n\n        if (sortField && sortDirection) {\n            switch (sortDirection) {\n                case \"asc\": {\n                    query.ascending(sortField)\n                } break\n                case \"desc\": {\n                    query.descending(sortField)\n                } break\n                default: break\n            }\n        }\n\n        //console.log('wheres: ', wheres)\n        Object.keys(wheres).forEach((key) => {\n            const _val = wheres[key]\n            if (!_val || !_val.fieldName || !_val.value) {\n                return\n            }\n            const { fieldName, constraint, value, type } = _val\n            const _value = handleQueryValueWithType(value, type)\n\n            switch (constraint) {\n                case 'equalTo':\n                    query.equalTo(fieldName, _value)\n                    break\n                case 'notEqualTo':\n                    query.notEqualTo(fieldName, _value)\n                    break\n                default:\n                    break\n            }\n        })\n        if (itemProps.showLimit && limit) {\n            query.limit(parseInt(limit))\n        }\n        // if (skip) {\n        //     query.skip(parseInt(skip))\n        // }\n        query._include = []\n        query._exclude = []\n        if (include) {\n            try {\n                const _include = JSON.parse(include)\n                if (_include && Array.isArray(_include)) {\n\n                    query.include(_include)\n                }\n            } catch (e) {\n                console.error('parseQuery > applyQueryConstraints > include ', e)\n            }\n        }\n        if (exclude) {\n            try {\n                const _exclude = JSON.parse(exclude)\n                if (_exclude && Array.isArray(_exclude)) {\n                    query.exclude(_exclude)\n                }\n            } catch (e) {\n                console.error('parseQuery > applyQueryConstraints > exclude ', e)\n            }\n        }\n        //console.log('applyQueryConstraints > query: ', query.toJSON(), 'wheres', wheres)\n    }\n\n    return (\n\n        <Accordion className=\"w-full border-warmGray-400  border-2 px-4 py-4 rounded-xl\">\n            <AccordionSummary\n                expandIcon={<ExpandMoreIcon />}\n                aria-controls=\"panel1a-content\"\n                id=\"panel1a-header\">\n                <div className=\"grid grid-cols-2 justify-between w-full\">\n                    <div className=\"\">\n                        <h4>{`${label} ➻ ${key ? `${key}` : `${className ? className : ''}`}`}</h4>\n                    </div>\n                    <div className=\"flex justify-end mr-4\">\n                        {query ?\n                            <>\n                                {/* <Button className={'mr-4'}>Preview</Button> */}\n                                <Button onClick={onClear}>Clear</Button>\n\n                            </>\n                            : null}\n                        {itemProps.onRemove ?\n                            <Button onClick={onRemove}>Remove data query</Button> : null}\n\n                    </div>\n                </div>\n            </AccordionSummary>\n            <AccordionDetails>\n                {(!schemas.current) ?\n                    <div className=\"w-full justify-center flex\">\n                        <CircularProgress />\n                    </div>\n                    :\n                    <div className=\"w-full\">\n                        <div className=\"mt-6 w-full\">\n                            <Formulaik\n                                componentsLibraries={[componentsLibrary, FormulaikMui]}\n                                initialValues={initialValues}\n                                validationSchema={validationSchema}\n                                formItemsProvider={formItemsProvider}\n                                onValuesChanged={onValuesChanged}\n                                error={error} />\n                        </div>\n                        {query ?\n                            <div className=\"mt-2 text-xs text-warmGray-600 italic w-full\">\n                                <b>{\"Query\"}</b>\n                                <ReactJson src={query.toJSON()} collapsed enableClipboard={false} />\n                            </div>\n                            : null}\n                        {(query && queryResult) ?\n                            <div className=\"mt-2 text-xs text-warmGray-600 italic w-full\">\n                                <b>{`Results (count: ${queryResult.count})`}</b>\n                                <ReactJson src={queryResult.results.map(i => i.toJSON())} collapsed enableClipboard={false} />\n                            </div>\n                            : null}\n                    </div>\n                }\n            </AccordionDetails>\n        </Accordion>\n    )\n}\n\n\n","import React, { useState, useRef, useEffect } from 'react'\nimport Formulaik from 'formulaik'\nimport FormulaikMui from 'formulaik-mui'\nimport * as Yup from 'yup'\n\nconst fetchItems = async ({ search, sort, filter, className, include = [], exclude = [], queryHook, data }) => {\n    console.log('fetchItems: ', className)\n    if (!className) {\n        return []\n    }\n\n    if (search && search.length < 2) {\n        return []\n    }\n\n    const _className = (typeof className === 'function') ? className({ data }) : className\n    console.log('fetchItems: _className', _className)\n    if (!_className) {\n        return []\n    }\n    const query = new Parse.Query(_className)\n    switch (sort) {\n        case 'desc':\n            query.descending('createdAt')\n            break\n        default:\n            query.ascending('createdAt')\n            break\n    }\n\n\n    queryHook && queryHook({ query, search, sort, filter })\n\n    if (filter !== 'all') {\n        //_query.startsWith('mimeType', filter)\n    }\n    //_query.fullText('name', controls.search.query ? controls.search.query : '')\n    query.include(include)\n    query.exclude(exclude)\n    return query.find()\n}\n\nexport default (props) => {\n    const {\n        values,\n        customOnValueChanged,\n        errors,\n        item: { label, id, props: itemProps }\n    } = props\n\n    const [error, setError] = useState(null)\n    const { className, include = [], exclude = [], queryHook, getOptionLabel, multiple = true } = itemProps\n    var data = values[id]\n    if (!data) {\n        data = multiple ? [] : null\n    }\n    if (Array.isArray(data)) {\n        data = data.filter(a => a)\n    }\n\n    const validationSchema = () => {\n        return Yup.object().shape({\n            items: multiple ? Yup.array() : Yup.object()\n        })\n    }\n\n    const formItemsProvider = [\n        {\n            type: 'autocomplete',\n            schema: 'items',\n            id: 'items',\n            label: label,\n            props: {\n                multiple,\n                filterSelectedOptions: true,\n                fetcher: async ({ value }) => {\n                    return fetchItems({ search: value, className, include, exclude, queryHook, data })\n                },\n                isOptionEqualToValue: (option, value) => { return (option.id === value.id) },\n                getOptionLabel,\n            }\n        },\n    ]\n\n    const initialValues = {\n        items: data\n    }\n\n    const onValuesChanged = (__values) => {\n        customOnValueChanged && customOnValueChanged(__values.items)\n    }\n\n    return <Formulaik\n        componentsLibraries={[FormulaikMui]}\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        formItemsProvider={formItemsProvider}\n        onValuesChanged={onValuesChanged}\n        error={error} />\n}\n","import ParseQuery from './parseQuery'\nimport ParseObjectAutoComplete from './parseObjectAutoComplete'\nimport Wheres from './wheres'\nimport WhereSingle from './whereSingle'\n\nexport default (props) => {\n    const { type } = props\n    switch (type) {\n        case 'parseQuery':\n            return ParseQuery\n        case 'parseObjectAutoComplete':\n            return ParseObjectAutoComplete\n        case 'where':\n            return WhereSingle\n        case 'wheres':\n            return Wheres\n        default:\n            return null\n    }\n}"],"names":["props","values","customOnValueChanged","item","id","itemProps","useState","error","fields","validationSchema","Yup","shape","fieldName","required","constraint","value","fieldNameOptions","items","label","Object","keys","forEach","key","includes","_item","push","inputTypeFromFieldType","data","type","formItemsProvider","isMulti","className","schema","options","initialValues","onValuesChanged","__values","result","struct","FormulaikMui","_value","_","isEmpty","_placeHolder","shortid","generate","val","useEffect","updateValues","force","handleRemove","_id","__value","wheresToArray","map","i","_items","ids","length","_v","_values","placeholderExists","findWhere","undefined","componentsLibrary","WhereComponent","WheresComponent","fetchSchemas","Parse","Cloud","run","console","log","errors","schemas","useRef","queryResult","setQueryResult","buildSchemas","current","classNameInclude","classNameExclude","filter","updateQueryResult","query","accessor","dependsOnUser","userAccessor","nullable","_schema","classNameItem","fetcher","_i","isOptionEqualToValue","option","getOptionLabel","name","disabled","blockClassName","showCustomKey","helperText","showDependsOnUser","subLabel","content","showLimit","vertical","adaptInitialWheres","where","toJSON","sortDirection","def","order","_order","first","trim","charAt","sortField","substring","wheres","limit","_limit","include","JSON","stringify","_include","exclude","_exclude","hideQueryResult","_query","withCount","find","Query","applyQueryConstraints","onRemove","onClear","handleQueryValueWithType","_where","skip","ascending","descending","_val","equalTo","notEqualTo","parseInt","parse","Array","isArray","e","count","results","fetchItems","search","sort","queryHook","_className","multiple","a","filterSelectedOptions","ParseQuery","ParseObjectAutoComplete","WhereSingle","Wheres"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,mBAAe,UAACA,KAAD,EAAW;AACtB,MACIC,MADJ,GAKID,KALJ,CACIC,MADJ;AAAA,MAEIC,oBAFJ,GAKIF,KALJ,CAEIE,oBAFJ;AAAA,oBAKIF,KALJ,CAIIG,IAJJ;AAAA,MAIYC,EAJZ,eAIYA,EAJZ;AAAA,MAIuBC,SAJvB,eAIgBL;;AAGhB,kBAA0BM,QAAQ,CAAC,IAAD,CAAlC;AAAA,MAAOC,KAAP;;AACA,MAAMJ,IAAI,GAAGF,MAAM,CAACG,EAAD,CAAnB;AACA,MAAQI,MAAR,GAAmBH,SAAnB,CAAQG,MAAR;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,WAAOC,MAAA,GAAaC,KAAb,CAAmB;AACtBC,MAAAA,SAAS,EAAEF,MAAA,GACNG,QADM,CACG,2BADH,CADW;AAGtBC,MAAAA,UAAU,EAAEJ,MAAA,GACPG,QADO,CACE,2BADF,CAHU;AAKtBE,MAAAA,KAAK,EAAEL,MAAA,GACFG,QADE,CACO,2BADP;AALe,KAAnB,CAAP;AAQH,GATD;;AAWA,MAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAMC,KAAK,GAAG,CAAC;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaH,MAAAA,KAAK,EAAE;AAApB,KAAD,CAAd;AACAI,IAAAA,MAAM,CAACC,IAAP,CAAYZ,MAAZ,EAAoBa,OAApB,CAA4B,UAAAC,GAAG,EAAI;AAC/B,UAAI,CAAC,KAAD,EAAQC,QAAR,CAAiBD,GAAjB,CAAJ,EAA2B;AACvB;AACH;;AACD,UAAME,KAAK,GAAG;AAAEN,QAAAA,KAAK,EAAEI,GAAT;AAAcP,QAAAA,KAAK,EAAEO;AAArB,OAAd;AACAL,MAAAA,KAAK,CAACQ,IAAN,CAAWD,KAAX;AACH,KAND;AAOA,WAAOP,KAAP;AACH,GAVD;;AAYA,MAAMS,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,IAAD,EAAU;AACrC,QAAI,CAACA,IAAL,EAAW;AACP,aAAO;AACHC,QAAAA,IAAI,EAAE;AADH,OAAP;AAGH;;AAED,QAAQA,IAAR,GAAiBD,IAAjB,CAAQC,IAAR;;AACA,YAAQA,IAAR;AACI;AACA,WAAK,QAAL;AACI,eAAO;AACHA,UAAAA,IAAI,EAAE;AADH,SAAP;;AAGJ,WAAK,MAAL;AACI,eAAO;AACHA,UAAAA,IAAI,EAAE;AADH,SAAP;AAPR;AAWH,GAnBD;;AAoBA,MAAMC,iBAAiB,GAAG,CACtB;AACIC,IAAAA,OAAO,EAAE,IADb;AAEIC,IAAAA,SAAS,EAAE,MAFf;AAGId,IAAAA,KAAK,EAAE,CACH;AACIW,MAAAA,IAAI,EAAE,QADV;AAEII,MAAAA,MAAM,EAAE,WAFZ;AAGI5B,MAAAA,EAAE,EAAE,WAHR;AAIIc,MAAAA,KAAK,EAAE,YAJX;AAKIa,MAAAA,SAAS,EAAE,iBALf;AAMI/B,MAAAA,KAAK,EAAE;AACHiC,QAAAA,OAAO,EAAEjB,gBAAgB;AADtB;AANX,KADG,EAWH;AACIY,MAAAA,IAAI,EAAE,QADV;AAEII,MAAAA,MAAM,EAAE,YAFZ;AAGI5B,MAAAA,EAAE,EAAE,YAHR;AAIIc,MAAAA,KAAK,EAAE,YAJX;AAKIa,MAAAA,SAAS,EAAE,iBALf;AAMI/B,MAAAA,KAAK,EAAE;AACHiC,QAAAA,OAAO,EAAE,CACL;AAAEf,UAAAA,KAAK,EAAE,SAAT;AAAoBH,UAAAA,KAAK,EAAE;AAA3B,SADK,EAGL;AAAEG,UAAAA,KAAK,EAAE,aAAT;AAAwBH,UAAAA,KAAK,EAAE;AAA/B,SAHK,EASL;AAAEG,UAAAA,KAAK,EAAE,QAAT;AAAmBH,UAAAA,KAAK,EAAE;AAA1B,SATK,EAUL;AAAEG,UAAAA,KAAK,EAAE,cAAT;AAAyBH,UAAAA,KAAK,EAAE;AAAhC,SAVK;AADN;AANX,KAXG,eAiCKW,sBAAsB,CAACvB,IAAD,CAjC3B;AAkCC6B,MAAAA,MAAM,EAAE,OAlCT;AAmCC5B,MAAAA,EAAE,EAAE,OAnCL;AAoCCc,MAAAA,KAAK,EAAE,OApCR;AAqCCa,MAAAA,SAAS,EAAE;AArCZ;AAHX,GADsB,CAA1B;AAiDA,MAAMG,aAAa,GAAG/B,IAAI,GAAGA,IAAH,GAAU,EAApC;;AAEA,MAAMgC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAc;AAClC,QAAMC,MAAM,gBAAQlC,IAAR,EAAiBiC,QAAjB,CAAZ;;AACA,QAAIA,QAAQ,CAACxB,SAAb,EAAwB;AACpB,UAAM0B,MAAM,GAAG9B,MAAM,CAAC4B,QAAQ,CAACxB,SAAV,CAArB;;AACA,UAAI0B,MAAJ,EAAY;AACRD,QAAAA,MAAM,CAACT,IAAP,GAAcU,MAAM,CAACV,IAArB;AACH;AACJ;;AACD1B,IAAAA,oBAAoB,IAAIA,oBAAoB,CAACmC,MAAD,CAA5C;AACH,GATD;;AAoBA,sBAAO,oBAAC,SAAD;AACH,IAAA,mBAAmB,EAAE,CAACE,YAAD,CADlB;AAEH,IAAA,aAAa,EAAEL,aAFZ;AAGH,IAAA,gBAAgB,EAAEzB,gBAHf;AAIH,IAAA,iBAAiB,EAAEoB,iBAJhB;AAKH,IAAA,eAAe,EAAEM,eALd;AAMH,IAAA,KAAK,EAAE5B;AANJ,IAAP;AAYH,CA1ID;;ACGA,cAAe,UAACP,KAAD,EAAW;AACxB,MACEC,MADF,GAIID,KAJJ,CACEC,MADF;AAAA,MAEEC,oBAFF,GAIIF,KAJJ,CAEEE,oBAFF;AAAA,oBAIIF,KAJJ,CAGEG,IAHF;AAAA,MAGUC,EAHV,eAGUA,EAHV;AAAA,MAGqBC,SAHrB,eAGcL,KAHd;AAMA,MAAMwC,MAAM,GAAGvC,MAAM,CAACG,EAAD,CAArB;;AACA,MAAI,CAACoC,MAAD,IAAWC,CAAC,CAACC,OAAF,CAAUF,MAAV,CAAf,EAAkC;AAChC,QAAMG,YAAY,GAAG;AAAEvC,MAAAA,EAAE,EAAEwC,OAAO,CAACC,QAAR;AAAN,KAArB;AACA,QAAMC,GAAG,GAAG,EAAZ;AACAA,IAAAA,GAAG,CAACH,YAAY,CAACvC,EAAd,CAAH,GAAuBuC,YAAvB;AACAzC,IAAAA,oBAAoB,IAAIA,oBAAoB,CAAC4C,GAAD,CAA5C;AACA,wBAAO;AAAK,MAAA,SAAS,EAAC;AAAf,oBACL;AAAK,MAAA,SAAS,EAAC;AAAf,oBACE,oBAAC,gBAAD,OADF,CADK,CAAP;AAKD;;AAEDC,EAAAA,SAAS,CAAC,YAAM;AACdC,IAAAA,YAAY,CAAC;AAAE/C,MAAAA,MAAM,EAAEA,MAAM,CAACG,EAAD,CAAhB;AAAsB6C,MAAAA,KAAK,EAAE;AAA7B,KAAD,CAAZ;AACD,GAFQ,EAEN,EAFM,CAAT;;AAKA,kBAA0B3C,QAAQ,CAAC,IAAD,CAAlC;AAAA,MAAOC,KAAP;;AACA,MAAQyB,MAAR,GAAmB3B,SAAnB,CAAQ2B,MAAR;;AAEA,MAAMvB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,WAAOC,MAAA,GAAaC,KAAb,EAAP;AACD,GAFD;;AAIA,MAAMuC,YAAY,GAAG,SAAfA,YAAe,OAAiB;AAAA,QAAVC,GAAU,QAAd/C,EAAc;;AACpC,QAAI,CAAC+C,GAAD,IAAQ,CAAClD,MAAT,IAAmB,CAACA,MAAM,CAACG,EAAD,CAA9B,EAAoC;AAClC;AACD;;AACD,QAAMoC,MAAM,GAAGvC,MAAM,CAACG,EAAD,CAArB;;AAEA,QAAI,CAACoC,MAAD,IAAW,CAACA,MAAM,CAACW,GAAD,CAAtB,EAA6B;AAC3B;AACD;;AACD,QAAMC,OAAO,gBAAQZ,MAAR,CAAb;;AACA,WAAOY,OAAO,CAACD,GAAD,CAAd;AACAH,IAAAA,YAAY,CAAC;AAAE/C,MAAAA,MAAM,EAAEmD;AAAV,KAAD,CAAZ;AACD,GAZD;;AAcA,MAAMvB,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B,QAAQrB,MAAR,GAAmBwB,MAAnB,CAAQxB,MAAR;AACA,QAAMS,KAAK,GAAGoC,aAAa,EAA3B;AACA,WAAOpC,KAAK,CAACqC,GAAN,CAAU,UAACnD,IAAD,EAAOoD,CAAP;AAAA,aAAc;AAC7B3B,QAAAA,IAAI,EAAE,OADuB;AAE7BxB,QAAAA,EAAE,EAAED,IAAI,CAACC,EAFoB;AAG7BJ,QAAAA,KAAK,EAAE;AACLQ,UAAAA,MAAM,EAANA,MADK;AAEL0C,UAAAA,YAAY,EAAZA;AAFK;AAHsB,OAAd;AAAA,KAAV,CAAP;AAQD,GAXD;;AAcA,MAAMhB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAMjB,KAAK,GAAGoC,aAAa,EAA3B;AACA,QAAMG,MAAM,GAAG,EAAf;AACA,QAAMhB,MAAM,GAAGvC,MAAM,CAACG,EAAD,CAArB;AACA,QAAMqD,GAAG,GAAGxC,KAAK,CAACqC,GAAN,CAAU,UAAAnD,IAAI;AAAA,aAAIA,IAAI,CAACC,EAAT;AAAA,KAAd,CAAZ;;AACA,SAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,GAAG,CAACC,MAAxB,EAAgCH,CAAC,EAAjC,EAAqC;AACnC,UAAMJ,GAAG,GAAGM,GAAG,CAACF,CAAD,CAAf;AACA,UAAMT,IAAG,GAAGN,MAAM,CAACW,GAAD,CAAlB;AACAK,MAAAA,MAAM,CAACL,GAAD,CAAN;AAAgB/C,QAAAA,EAAE,EAAE+C;AAApB,SAA6BL,IAAG,GAAGA,IAAH,GAAS,EAAzC;AACD;;AAED,WAAOU,MAAP;AACD,GAZD;;AAgBA,MAAMH,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAE1B,QAAMb,MAAM,GAAGvC,MAAM,CAACG,EAAD,CAArB;AAEA,WAAOqC,CAAC,CAACa,GAAF,CAAMd,MAAN,EAAc,UAACzB,KAAD,EAAQO,GAAR,EAAgB;AAEnC,UAAMqC,EAAE,gBACH5C,KADG,CAAR;;AAGA,UAAI,CAAC4C,EAAE,CAACvD,EAAR,EAAY;AACVuD,QAAAA,EAAE,CAACvD,EAAH,GAAQkB,GAAR;AACD;;AACD,aAAOqC,EAAP;AACD,KATM,CAAP;AAUD,GAdD;;AAgBA,MAAMxB,eAAe,GAAG,SAAlBA,eAAkB,CAACyB,OAAD,EAAa;AAEnCZ,IAAAA,YAAY,CAAC;AAAE/C,MAAAA,MAAM,EAAE2D;AAAV,KAAD,CAAZ;AACD,GAHD;;AAKA,MAAMZ,YAAY,GAAG,SAAfA,YAAe,QAAuC;AAAA,QAA5BY,OAA4B,SAApC3D,MAAoC;AAAA,4BAAnBgD,KAAmB;AAAA,QAAnBA,KAAmB,4BAAX,IAAW;AAC1D,QAAMN,YAAY,GAAG;AAAEvC,MAAAA,EAAE,EAAEwC,OAAO,CAACC,QAAR;AAAN,KAArB;;AAEA,QAAIgB,iBAAiB,GAAGpB,CAAC,CAACqB,SAAF,CAAYrB,CAAC,CAACxC,MAAF,CAAS2D,OAAT,CAAZ,EAA+B;AAAEhD,MAAAA,SAAS,EAAEmD;AAAb,KAA/B,CAAxB;;AACA,QAAI,CAACF,iBAAL,EAAwB;AACtBA,MAAAA,iBAAiB,GAAGpB,CAAC,CAACqB,SAAF,CAAYrB,CAAC,CAACxC,MAAF,CAAS2D,OAAT,CAAZ,EAA+B;AAAEhD,QAAAA,SAAS,EAAE;AAAb,OAA/B,CAApB;AACD;;AAED,QAAI,CAACiD,iBAAL,EAAwB;AACtBD,MAAAA,OAAO,CAACjB,YAAY,CAACvC,EAAd,CAAP,GAA2BuC,YAA3B;AACD;;AAED,QAAIkB,iBAAiB,IAAI,CAACZ,KAA1B,EAAiC;AAC/B;AACD;;AACD/C,IAAAA,oBAAoB,IAAIA,oBAAoB,CAAC0D,OAAD,CAA5C;AACD,GAhBD;;AAkBA,MAAMI,iBAAiB,GAAG,SAApBA,iBAAoB,QAAc;AAAA,QAAXpC,IAAW,SAAXA,IAAW;;AACtC,YAAQA,IAAR;AACE,WAAK,OAAL;AACE,eAAOqC,WAAP;;AACF;AACE,eAAO,IAAP;AAJJ;AAMD,GAPD;;AAaA,sBAAO;AAAK,IAAA,SAAS,EAAC;AAAf,kBACL,oBAAC,SAAD;AACE,IAAA,mBAAmB,EAAE,CAACD,iBAAD,EAAoBzB,YAApB,CADvB;AAEE,IAAA,aAAa,EAAEL,aAFjB;AAGE,IAAA,gBAAgB,EAAEzB,gBAHpB;AAIE,IAAA,iBAAiB,EAAEoB,iBAJrB;AAKE,IAAA,eAAe,EAAEM,eALnB;AAME,IAAA,KAAK,EAAE5B;AANT,IADK,CAAP;AAiBD,CAjJD;;ACUA,IAAMyD,iBAAiB,GAAG,SAApBA,iBAAoB,OAAc;AAAA,MAAXpC,IAAW,QAAXA,IAAW;;AACpC,UAAQA,IAAR;AACI,SAAK,QAAL;AACI,aAAOsC,MAAP;;AACJ;AACI,aAAO,IAAP;AAJR;AAMH,CAPD;;AAUA,IAAMC,YAAY,YAAZA,YAAY;AAAA,MAAe;AAAA,2BAERC,KAAK,CAACC,KAAN,CAAYC,GAAZ,CAAgB,QAAhB,CAFQ,iBAEvBjC,MAFuB;AAG7BkC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBnC,MAAxB;AACA,aAAOA,MAAP;AAJ6B;AAKhC,GALiB;AAAA;AAAA;AAAA,CAAlB;;AAOA,kBAAe,UAACrC,KAAD,EAAW;AACtB,MACIC,MADJ,GAMID,KANJ,CACIC,MADJ;AAAA,MAEIC,oBAFJ,GAMIF,KANJ,CAEIE,oBAFJ;AAAA,MAGIuE,cAGAzE,KANJ,CAKIG,IALJ;AAAA,MAKYC,EALZ,eAKYA,EALZ;AAAA,MAKgBc,KALhB,eAKgBA,KALhB;AAAA,MAK8Bb,SAL9B,eAKuBL,KALvB;AAQA,MAAM0E,OAAO,GAAGC,MAAM,EAAtB;;AACA,kBAA0BrE,QAAQ,CAAC,IAAD,CAAlC;AAAA,MAAOC,KAAP;;AAGA,mBAAsCD,QAAQ,CAAC,IAAD,CAA9C;AAAA,MAAOsE,WAAP;AAAA,MAAoBC,cAApB;;AAEA,MAAMC,YAAY,YAAZA,YAAY;AAAA,QAAe;AAC7B,UAAIJ,OAAO,CAACK,OAAZ,EAAqB;AACjB;AACH;;AAH4B,6BAKTZ,YAAY,EALH,iBAKvBlD,KALuB;AAM7B,oCAAsFZ,SAAtF,CAAQ2E,gBAAR;AAAA,YAAQA,gBAAR,sCAA2B,IAA3B;AAAA,oCAAsF3E,SAAtF,CAAiC4E,gBAAjC;AAAA,YAAiCA,gBAAjC,sCAAoD,CAAC,eAAD,EAAkB,UAAlB,CAApD;;AAN6B,YAOzBD,gBAPyB;AAQzBN,UAAAA,OAAO,CAACK,OAAR,GAAkBtC,CAAC,CAACyC,MAAF,CAASjE,KAAT,EAAgB,UAAAd,IAAI;AAAA,mBAAI6E,gBAAgB,CAACzD,QAAjB,CAA0BpB,IAAI,CAAC4B,SAA/B,CAAJ;AAAA,WAApB,CAAlB;AARyB;AAUzB2C,UAAAA,OAAO,CAACK,OAAR,GAAkBtC,CAAC,CAACyC,MAAF,CAASjE,KAAT,EAAgB,UAAAd,IAAI;AAAA,mBAAI,CAAC8E,gBAAgB,CAAC1D,QAAjB,CAA0BpB,IAAI,CAAC4B,SAA/B,CAAL;AAAA,WAApB,CAAlB;AAVyB;AAAA;AAahC,KAbiB;AAAA;AAAA;AAAA,GAAlB;;AAeAgB,EAAAA,SAAS,CAAC,YAAM;AACZ+B,IAAAA,YAAY;AACf,GAFQ,EAEN,EAFM,CAAT;AAIA/B,EAAAA,SAAS,CAAC,YAAM;AACZoC,IAAAA,iBAAiB;AACpB,GAFQ,EAEN,CAAClF,MAAD,CAFM,CAAT;;AAKA,cAA2EA,MAAM,IAAIA,MAAM,CAACG,EAAD,CAAjB,GAAyBH,MAAM,CAACG,EAAD,CAA/B,GAAsC,EAAhH;AAAA,MAAQgF,KAAR,SAAQA,KAAR;AAAA,MAAerD,SAAf,SAAeA,SAAf;AAAA,MAA0BsD,QAA1B,SAA0BA,QAA1B;AAAA,MAAoC/D,GAApC,SAAoCA,GAApC;AAAA,MAAyCgE,aAAzC,SAAyCA,aAAzC;AAAA,MAAwDC,YAAxD,SAAwDA,YAAxD;;AAEA,MAAM9E,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAAC2E,KAAL,EAAY;AACR,aAAO1E,MAAA,GAAaC,KAAb,CAAmB;AACtBoB,QAAAA,SAAS,EAAErB,MAAA,GAAa8E,QAAb;AADW,OAAnB,CAAP;AAGH;;AAED,WAAO9E,MAAA,GAAaC,KAAb,CAAmB;AAKtBoB,MAAAA,SAAS,EAAErB,MAAA,GAAa8E,QAAb;AALW,KAAnB,CAAP;AAOH,GAdD;;AAgBA,MAAMxE,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAACoE,KAAD,IAAU,CAACV,OAAO,CAACK,OAAvB,EAAgC;AAC5B,aAAO,EAAP;AACH;;AAAC,QAAMU,OAAO,GAAGhD,CAAC,CAACqB,SAAF,CAAYY,OAAO,CAACK,OAApB,EAA6B;AAAEhD,MAAAA,SAAS,EAATA;AAAF,KAA7B,CAAhB;;AACF,QAAI,CAAC0D,OAAL,EAAc;AACV,aAAO,EAAP;AACH;;AACD,QAAQjF,MAAR,GAAmBiF,OAAnB,CAAQjF,MAAR;AACA,QAAMS,KAAK,GAAG,CAAC;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaH,MAAAA,KAAK,EAAE;AAApB,KAAD,CAAd;AACAI,IAAAA,MAAM,CAACC,IAAP,CAAYZ,MAAZ,EAAoBa,OAApB,CAA4B,UAAAC,GAAG,EAAI;AAC/B,UAAI,CAAC,KAAD,EAAQC,QAAR,CAAiBD,GAAjB,CAAJ,EAA2B;AACvB;AACH;;AACD,UAAME,KAAK,GAAG;AAAEN,QAAAA,KAAK,EAAEI,GAAT;AAAcP,QAAAA,KAAK,EAAEO;AAArB,OAAd;AACAL,MAAAA,KAAK,CAACQ,IAAN,CAAWD,KAAX;AACH,KAND;AAOA,WAAOP,KAAP;AACH,GAjBD;;AAmBA,MAAMY,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC5B,QAAM6D,aAAa,GAAG;AAClB9D,MAAAA,IAAI,EAAE,cADY;AAElBI,MAAAA,MAAM,EAAE,WAFU;AAGlB5B,MAAAA,EAAE,EAAE,WAHc;AAIlBc,MAAAA,KAAK,EAAE,WAJW;AAKlBa,MAAAA,SAAS,EAAE,OALO;AAMlB/B,MAAAA,KAAK,EAAE;AACH2F,QAAAA,OAAO;AAAA;AAAA,cAAuB;AAC1B,gBAAM1E,KAAK,GAAGyD,OAAO,CAACK,OAAtB;;AACA,gBAAMa,EAAE,GAAG3E,KAAK,CAACqC,GAAN,CAAU,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACxB,SAAN;AAAA,aAAX,CAAX;;AACA,mCAAO6D,EAAP;AACH,WAJM;AAAA;AAAA;AAAA,SADJ;AAMHC,QAAAA,oBAAoB,EAAE,8BAACC,MAAD,EAAS/E,KAAT,EAAmB;AACrC,iBAAQ+E,MAAM,KAAK/E,KAAnB;AACH,SARE;AASHgF,QAAAA,cAAc,EAAE,wBAACD,MAAD,EAAY;AACxB,cAAME,IAAI,GAAGF,MAAb;AACA,sBAAUE,IAAV;AACH,SAZE;AAaHC,QAAAA,QAAQ,EAAE5F,SAAS,CAAC6F;AAbjB;AANW,KAAtB;;AAuBA,QAAI,CAACd,KAAL,EAAY;AACR,aAAO,CAACM,aAAD,CAAP;AACH;;AAED,YACIA,aADJ,SASQrF,SAAS,CAAC8F,aAAV,GAA0B,CAC1B;AACIvE,MAAAA,IAAI,EAAE,OADV;AAEII,MAAAA,MAAM,EAAE,KAFZ;AAGI5B,MAAAA,EAAE,EAAE,KAHR;AAIIc,MAAAA,KAAK,EAAE,YAJX;AAKIa,MAAAA,SAAS,EAAE,OALf;AAMI/B,MAAAA,KAAK,EAAE;AAAEoG,QAAAA,UAAU,EAAE;AAAd;AANX,KAD0B,CAA1B,GASA,EAlBR,EAmBQ/F,SAAS,CAACgG,iBAAV,GAA8B,CAAC;AAC/BvE,MAAAA,OAAO,EAAE,IADsB;AAE/BC,MAAAA,SAAS,EAAE,MAFoB;AAG/Bd,MAAAA,KAAK,GACD;AACIW,QAAAA,IAAI,EAAE,UADV;AAEII,QAAAA,MAAM,EAAE,eAFZ;AAGI5B,QAAAA,EAAE,EAAE,eAHR;AAIIc,QAAAA,KAAK,EAAE,iBAJX;AAKIa,QAAAA,SAAS,EAAE,YALf;AAMI/B,QAAAA,KAAK,EAAE;AACHsG,UAAAA,QAAQ,EAAE;AADP;AANX,OADC,SAYG,CAAO,CACP;AACI1E,QAAAA,IAAI,EAAE,OADV;AAEII,QAAAA,MAAM,EAAE,cAFZ;AAGI5B,QAAAA,EAAE,EAAE,cAHR;AAIIc,QAAAA,KAAK,EAAE,eAJX;AAKIa,QAAAA,SAAS,EAAE,YALf;AAMI/B,QAAAA,KAAK,EAAE;AAAEoG,UAAAA,UAAU,EAAE;AAAd;AANX,OADO,CAAP,CAZH;AAH0B,KAAD,CAA9B,GA0BC,EA7CT,GA8CI;AACIxE,MAAAA,IAAI,EAAE,OADV;AAEII,MAAAA,MAAM,EAAE,UAFZ;AAGI5B,MAAAA,EAAE,EAAE,UAHR;AAIIc,MAAAA,KAAK,EAAE,gBAJX;AAKIa,MAAAA,SAAS,EAAE,OALf;AAMI/B,MAAAA,KAAK,EAAE;AAAEoG,QAAAA,UAAU,EAAE;AAAd;AANX,KA9CJ,EAsDI;AACIxE,MAAAA,IAAI,EAAE,SADV;AAEIxB,MAAAA,EAAE,EAAE,SAFR;AAGIJ,MAAAA,KAAK,EAAE;AACHuG,QAAAA,OAAO,eAAE,4CAAG,+BAAI,QAAJ,CAAH;AADN;AAHX,KAtDJ,EA6DI;AACI3E,MAAAA,IAAI,EAAE,QADV;AAEIxB,MAAAA,EAAE,EAAE,QAFR;AAGIJ,MAAAA,KAAK,EAAE;AACHgC,QAAAA,MAAM,EAAGoD,KAAK,IAAIV,OAAO,CAACK,OAAlB,GAA6BtC,CAAC,CAACqB,SAAF,CAAYY,OAAO,CAACK,OAApB,EAA6B;AAAEhD,UAAAA,SAAS,EAATA;AAAF,SAA7B,CAA7B,GAA2E;AADhF;AAHX,KA7DJ,EAoEI;AACIH,MAAAA,IAAI,EAAE,SADV;AAEIxB,MAAAA,EAAE,EAAE,SAFR;AAGIJ,MAAAA,KAAK,EAAE;AACHuG,QAAAA,OAAO,eAAE,4CAAG,+BAAI,qBAAJ,CAAH;AADN;AAHX,KApEJ,GA2EQlG,SAAS,CAACmG,SAAV,GAAsB,CAAC;AACvB1E,MAAAA,OAAO,EAAE,IADc;AAEvBC,MAAAA,SAAS,EAAE,MAFY;AAGvBd,MAAAA,KAAK,EAAE,CACH;AACIW,QAAAA,IAAI,EAAE,OADV;AAEII,QAAAA,MAAM,EAAE,OAFZ;AAGI5B,QAAAA,EAAE,EAAE,OAHR;AAIIc,QAAAA,KAAK,EAAE,OAJX;AAKIa,QAAAA,SAAS,EAAE,OALf;AAMI/B,QAAAA,KAAK,EAAE;AAAEoG,UAAAA,UAAU,EAAE;AAAd;AANX,OADG;AAHgB,KAAD,CAAtB,GAoBC,EA/FT,GAgGI;AACItE,MAAAA,OAAO,EAAE,IADb;AAEIC,MAAAA,SAAS,EAAE,MAFf;AAGId,MAAAA,KAAK,EAAE,CACH;AACIW,QAAAA,IAAI,EAAE,QADV;AAEII,QAAAA,MAAM,EAAE,eAFZ;AAGI5B,QAAAA,EAAE,EAAE,eAHR;AAIIc,QAAAA,KAAK,EAAE,gBAJX;AAKIa,QAAAA,SAAS,EAAE,QALf;AAMI/B,QAAAA,KAAK,EAAE;AACHiC,UAAAA,OAAO,EAAE,CACL;AAAEf,YAAAA,KAAK,EAAE,IAAT;AAAeH,YAAAA,KAAK,EAAE;AAAtB,WADK,EAEL;AAAEG,YAAAA,KAAK,EAAE,MAAT;AAAiBH,YAAAA,KAAK,EAAE;AAAxB,WAFK,EAGL;AAAEG,YAAAA,KAAK,EAAE,KAAT;AAAgBH,YAAAA,KAAK,EAAE;AAAvB,WAHK;AADN;AANX,OADG,EAgBH;AACIa,QAAAA,IAAI,EAAE,SADV;AAEIxB,QAAAA,EAAE,EAAE,SAFR;AAGIJ,QAAAA,KAAK,EAAE;AACHyG,UAAAA,QAAQ,EAAE,IADP;AAEHF,UAAAA,OAAO,eAAE,+BAAI,KAAJ;AAFN;AAHX,OAhBG,EAwBH;AACI3E,QAAAA,IAAI,EAAE,QADV;AAEII,QAAAA,MAAM,EAAE,WAFZ;AAGI5B,QAAAA,EAAE,EAAE,WAHR;AAIIc,QAAAA,KAAK,EAAE,WAJX;AAKIa,QAAAA,SAAS,EAAE,OALf;AAMI/B,QAAAA,KAAK,EAAE;AACHiC,UAAAA,OAAO,EAAEjB,gBAAgB;AADtB;AANX,OAxBG;AAHX,KAhGJ,EAwII;AACIY,MAAAA,IAAI,EAAE,OADV;AAEII,MAAAA,MAAM,EAAE,SAFZ;AAGI5B,MAAAA,EAAE,EAAE,SAHR;AAIIc,MAAAA,KAAK,EAAE,YAJX;AAKIlB,MAAAA,KAAK,EAAE;AAAEoG,QAAAA,UAAU,EAAE;AAAd;AALX,KAxIJ,EA+II;AACIxE,MAAAA,IAAI,EAAE,OADV;AAEII,MAAAA,MAAM,EAAE,SAFZ;AAGI5B,MAAAA,EAAE,EAAE,SAHR;AAIIc,MAAAA,KAAK,EAAE,qEAJX;AAKIlB,MAAAA,KAAK,EAAE;AAAEoG,QAAAA,UAAU,EAAE;AAAd;AALX,KA/IJ;AAmKH,GA/LD;;AAiMA,MAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7B,QAAI,CAACtB,KAAL,EAAY;AACR,aAAO,EAAP;AACH;;AAED,QAAMuB,KAAK,GAAGvB,KAAK,CAACwB,MAAN,GAAeD,KAA7B;AACA,QAAMtE,MAAM,GAAG,EAAf;AACAlB,IAAAA,MAAM,CAACC,IAAP,CAAYuF,KAAZ,EAAmBtF,OAAnB,CAA2B,UAAAC,GAAG,EAAI;AAC9B,UAAMlB,EAAE,GAAGwC,OAAO,CAACC,QAAR,EAAX;AACAR,MAAAA,MAAM,CAACjC,EAAD,CAAN,GAAa;AACTA,QAAAA,EAAE,EAAFA,EADS;AAETQ,QAAAA,SAAS,EAAEU,GAFF;AAGTP,QAAAA,KAAK,EAAE4F,KAAK,CAACrF,GAAD,CAHH;AAITR,QAAAA,UAAU,EAAE;AAJH,OAAb;AAMH,KARD;AASA,WAAOuB,MAAP;AACH,GAjBD;;AAmBA,MAAMwE,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,QAAMC,GAAG,GAAG,IAAZ;;AACA,QAAI,CAAC1B,KAAL,EAAY;AACR,aAAO0B,GAAP;AACH;;AACD,QAAMC,KAAK,GAAG3B,KAAK,CAAC4B,MAApB;;AACA,QAAI,CAACD,KAAD,IAAUA,KAAK,CAACrD,MAAN,KAAiB,CAA/B,EAAkC;AAC9B,aAAOoD,GAAP;AACH;;AACD,QAAIG,KAAK,GAAGF,KAAK,CAAC,CAAD,CAAjB;;AACA,QAAI,CAACE,KAAD,IAAUA,KAAK,CAACC,IAAN,GAAaxD,MAAb,KAAwB,CAAtC,EAAyC;AACrC,aAAOoD,GAAP;AACH;;AAEDG,IAAAA,KAAK,GAAGA,KAAK,CAACC,IAAN,EAAR;AACA,QAAInG,KAAK,GAAG,KAAZ;AACA;AACA,QAAIkG,KAAK,CAACE,MAAN,CAAa,CAAb,MAAoB,GAAxB,EAA6B;AACzBpG,MAAAA,KAAK,GAAG,MAAR;AACAG,AACH;;AACD,WAAOH,KAAP;AACH,GAtBD;;AAwBA,MAAMqG,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,QAAMN,GAAG,GAAG,IAAZ;;AACA,QAAI,CAAC1B,KAAL,EAAY;AACR,aAAO0B,GAAP;AACH;;AACD,QAAMC,KAAK,GAAG3B,KAAK,CAAC4B,MAApB;;AACA,QAAI,CAACD,KAAD,IAAUA,KAAK,CAACrD,MAAN,KAAiB,CAA/B,EAAkC;AAC9B,aAAOoD,GAAP;AACH;;AACD,QAAIG,KAAK,GAAGF,KAAK,CAAC,CAAD,CAAjB;;AACA,QAAI,CAACE,KAAD,IAAUA,KAAK,CAACC,IAAN,GAAaxD,MAAb,KAAwB,CAAtC,EAAyC;AACrC,aAAOoD,GAAP;AACH;;AAEDG,IAAAA,KAAK,GAAGA,KAAK,CAACC,IAAN,EAAR;;AAEA,QAAID,KAAK,CAACE,MAAN,CAAa,CAAb,MAAoB,GAAxB,EAA6B;AACzBF,MAAAA,KAAK,GAAGA,KAAK,CAACI,SAAN,CAAgB,CAAhB,EAAmBJ,KAAK,CAACvD,MAAzB,CAAR;AACH;;AAED,WAAOuD,KAAP;AACH,GArBD;;AAwBA,MAAM/E,aAAa,GAAG;AAClBH,IAAAA,SAAS,EAATA,SADkB;AAElBT,IAAAA,GAAG,EAAHA,GAFkB;AAGlBgE,IAAAA,aAAa,EAAbA,aAHkB;AAIlBC,IAAAA,YAAY,EAAZA,YAJkB;AAKlBF,IAAAA,QAAQ,EAARA,QALkB;AAMlBiC,IAAAA,MAAM,EAAEZ,kBAAkB,EANR;AAOlBa,IAAAA,KAAK,EAAEnC,KAAK,GAAGA,KAAK,CAACoC,MAAT,GAAkB,EAPZ;AASlBC,IAAAA,OAAO,EAAErC,KAAK,GAAGsC,IAAI,CAACC,SAAL,CAAevC,KAAK,CAACwC,QAArB,CAAH,GAAoC,IAThC;AAUlBC,IAAAA,OAAO,EAAEzC,KAAK,GAAGsC,IAAI,CAACC,SAAL,CAAevC,KAAK,CAAC0C,QAArB,CAAH,GAAoC,IAVhC;AAYlBjB,IAAAA,aAAa,EAAEA,aAAa,EAZV;AAalBO,IAAAA,SAAS,EAAEA,SAAS;AAbF,GAAtB;;AAgBA,MAAMjC,iBAAiB,YAAjBA,iBAAiB;AAAA,QAAe;AAClC,UAAI9E,SAAS,CAAC0H,eAAd,EAA+B;AAC3B;AACH;;AAED,UAAI,CAAC3C,KAAL,EAAY;AACR;AACH;;AAED,UAAM4C,MAAM,GAAG5C,KAAf;;AACA4C,MAAAA,MAAM,CAACC,SAAP;;AAVkC,6BAWfD,MAAM,CAACE,IAAP,EAXe,iBAW5B/H,IAX4B;AAYlC0E,QAAAA,cAAc,CAAC1E,IAAD,CAAd;AAZkC;AAarC,KAbsB;AAAA;AAAA;AAAA,GAAvB;;AAeA,MAAMgC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAc;AAClC,QAAQL,SAAR,GAAsBK,QAAtB,CAAQL,SAAR;;AAGA,QAAI,CAACA,SAAL,EAAgB;AACZ7B,MAAAA,oBAAoB,IAAIA,oBAAoB,CAAC;AAAEkF,QAAAA,KAAK,EAAE,IAAT;AAAerD,QAAAA,SAAS,EAAE,IAA1B;AAAgCsD,QAAAA,QAAQ,EAAE;AAA1C,OAAD,CAA5C;AACA;AACH;;AAED,QAAI7D,KAAK,GAAG4D,KAAZ;;AACA,QAAI,CAAC5D,KAAD,IAAUA,KAAK,CAACO,SAAN,KAAoBA,SAAlC,EAA6C;AACzCP,MAAAA,KAAK,GAAG,IAAI4C,KAAK,CAAC+D,KAAV,CAAgBpG,SAAhB,CAAR;AACH;;AACDqG,IAAAA,qBAAqB,CAAC;AAAEhD,MAAAA,KAAK,EAAE5D,KAAT;AAAgBvB,MAAAA,MAAM,EAAEmC;AAAxB,KAAD,CAArB;AACA+C,IAAAA,iBAAiB;;AAMjBjF,IAAAA,oBAAoB,IAAIA,oBAAoB;AAAGkF,MAAAA,KAAK,EAAE5D;AAAV,OAAoBY,QAApB,EAA5C;AACH,GArBD;;AAuBA,MAAMiG,QAAQ,YAARA,QAAQ;AAAA,QAAe;AACzB,UAAIhI,SAAS,CAACgI,QAAd,EAAwB;AAAEhI,QAAAA,SAAS,CAACgI,QAAV;AAAsB;;AADvB;AAE5B,KAFa;AAAA;AAAA;AAAA,GAAd;;AAIA,MAAMC,OAAO,YAAPA,OAAO;AAAA,QAAe;AACxBnG,MAAAA,eAAe,CAAC,EAAD,CAAf;AADwB;AAE3B,KAFY;AAAA;AAAA;AAAA,GAAb;;AAIA,MAAMoG,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACxH,KAAD,EAAQa,IAAR,EAAiB;AAC9C;AAMA,WAAOb,KAAP;AACH,GARD;;AAUA,MAAMqH,qBAAqB,GAAG,SAAxBA,qBAAwB,QAA4B;AAAA,mCAAP,EAAO;AAAA,QAAzBhD,KAAyB,SAAzBA,KAAyB;AAAA,QAAlBnF,MAAkB,SAAlBA,MAAkB;;AACtD,QAAI,CAACmF,KAAL,EAAY;AACR;AACH;;AACDA,IAAAA,KAAK,CAACoD,MAAN,GAAe,EAAf;AACApD,IAAAA,KAAK,CAAC2B,KAAN,GAAc,EAAd;AAEA,QAAQO,MAAR,GAA4ErH,MAA5E,CAAQqH,MAAR;AAAA,QAAgBC,KAAhB,GAA4EtH,MAA5E,CAAgBsH,KAAhB;AAAA,QAAuBkB,AAAMhB,OAA7B,GAA4ExH,MAA5E,CAA6BwH,OAA7B;AAAA,QAAsCI,OAAtC,GAA4E5H,MAA5E,CAAsC4H,OAAtC;AAAA,QAA+ChB,aAA/C,GAA4E5G,MAA5E,CAA+C4G,aAA/C;AAAA,QAA8DO,SAA9D,GAA4EnH,MAA5E,CAA8DmH,SAA9D;;AAEA,QAAIA,SAAS,IAAIP,aAAjB,EAAgC;AAC5B,cAAQA,aAAR;AACI,aAAK,KAAL;AAAY;AACRzB,YAAAA,KAAK,CAACsD,SAAN,CAAgBtB,SAAhB;AACH;AAAC;;AACF,aAAK,MAAL;AAAa;AACThC,YAAAA,KAAK,CAACuD,UAAN,CAAiBvB,SAAjB;AACH;AAAC;AANN;AASH;;AAGDjG,IAAAA,MAAM,CAACC,IAAP,CAAYkG,MAAZ,EAAoBjG,OAApB,CAA4B,UAACC,GAAD,EAAS;AACjC,UAAMsH,IAAI,GAAGtB,MAAM,CAAChG,GAAD,CAAnB;;AACA,UAAI,CAACsH,IAAD,IAAS,CAACA,IAAI,CAAChI,SAAf,IAA4B,CAACgI,IAAI,CAAC7H,KAAtC,EAA6C;AACzC;AACH;;AACD,UAAQH,SAAR,GAA+CgI,IAA/C,CAAQhI,SAAR;AAAA,UAAmBE,UAAnB,GAA+C8H,IAA/C,CAAmB9H,UAAnB;AAAA,UAA+BC,KAA/B,GAA+C6H,IAA/C,CAA+B7H,KAA/B;;AACA,UAAMyB,MAAM,GAAG+F,wBAAwB,CAACxH,KAAD,AAAA,CAAvC;;AAEA,cAAQD,UAAR;AACI,aAAK,SAAL;AACIsE,UAAAA,KAAK,CAACyD,OAAN,CAAcjI,SAAd,EAAyB4B,MAAzB;AACA;;AACJ,aAAK,YAAL;AACI4C,UAAAA,KAAK,CAAC0D,UAAN,CAAiBlI,SAAjB,EAA4B4B,MAA5B;AACA;AANR;AAUH,KAlBD;;AAmBA,QAAInC,SAAS,CAACmG,SAAV,IAAuBe,KAA3B,EAAkC;AAC9BnC,MAAAA,KAAK,CAACmC,KAAN,CAAYwB,QAAQ,CAACxB,KAAD,CAApB;AACH;;AAIDnC,IAAAA,KAAK,CAACwC,QAAN,GAAiB,EAAjB;AACAxC,IAAAA,KAAK,CAAC0C,QAAN,GAAiB,EAAjB;;AACA,QAAIL,OAAJ,EAAa;AACT,UAAI;AACA,YAAMG,QAAQ,GAAGF,IAAI,CAACsB,KAAL,CAAWvB,OAAX,CAAjB;;AACA,YAAIG,QAAQ,IAAIqB,KAAK,CAACC,OAAN,CAActB,QAAd,CAAhB,EAAyC;AAErCxC,UAAAA,KAAK,CAACqC,OAAN,CAAcG,QAAd;AACH;AACJ,OAND,CAME,OAAOuB,CAAP,EAAU;AACR5E,QAAAA,OAAO,CAAChE,KAAR,CAAc,+CAAd,EAA+D4I,CAA/D;AACH;AACJ;;AACD,QAAItB,OAAJ,EAAa;AACT,UAAI;AACA,YAAMC,QAAQ,GAAGJ,IAAI,CAACsB,KAAL,CAAWnB,OAAX,CAAjB;;AACA,YAAIC,QAAQ,IAAImB,KAAK,CAACC,OAAN,CAAcpB,QAAd,CAAhB,EAAyC;AACrC1C,UAAAA,KAAK,CAACyC,OAAN,CAAcC,QAAd;AACH;AACJ,OALD,CAKE,OAAOqB,CAAP,EAAU;AACR5E,QAAAA,OAAO,CAAChE,KAAR,CAAc,+CAAd,EAA+D4I,CAA/D;AACH;AACJ;AAEJ,GAvED;;AAyEA,sBAEI,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC;AAArB,kBACI,oBAAC,gBAAD;AACI,IAAA,UAAU,eAAE,oBAAC,cAAD,OADhB;AAEI,qBAAc,iBAFlB;AAGI,IAAA,EAAE,EAAC;AAHP,kBAII;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI,gCAAQjI,KAAR,iBAAmBI,GAAG,QAAMA,GAAN,SAAiBS,SAAS,GAAGA,SAAH,GAAe,EAAzC,CAAtB,EADJ,CADJ,eAII;AAAK,IAAA,SAAS,EAAC;AAAf,KACKqD,KAAK,gBACF,iDAEI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEkD;AAAjB,aAFJ,CADE,GAMA,IAPV,EAQKjI,SAAS,CAACgI,QAAV,gBACG,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEA;AAAjB,yBADH,GAC2D,IAThE,CAJJ,CAJJ,CADJ,eAuBI,oBAAC,gBAAD,QACM,CAAC3D,OAAO,CAACK,OAAV,gBACG;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI,oBAAC,gBAAD,OADJ,CADH,gBAKG;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI,oBAAC,SAAD;AACI,IAAA,mBAAmB,EAAE,CAACf,iBAAD,EAAoBzB,YAApB,CADzB;AAEI,IAAA,aAAa,EAAEL,aAFnB;AAGI,IAAA,gBAAgB,EAAEzB,gBAHtB;AAII,IAAA,iBAAiB,EAAEoB,iBAJvB;AAKI,IAAA,eAAe,EAAEM,eALrB;AAMI,IAAA,KAAK,EAAE5B;AANX,IADJ,CADJ,EAUK6E,KAAK,gBACF;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI,+BAAI,OAAJ,CADJ,eAEI,oBAAC,SAAD;AAAW,IAAA,GAAG,EAAEA,KAAK,CAACwB,MAAN,EAAhB;AAAgC,IAAA,SAAS,MAAzC;AAA0C,IAAA,eAAe,EAAE;AAA3D,IAFJ,CADE,GAKA,IAfV,EAgBMxB,KAAK,IAAIR,WAAV,gBACG;AAAK,IAAA,SAAS,EAAC;AAAf,kBACI,oDAAuBA,WAAW,CAACwE,KAAnC,OADJ,eAEI,oBAAC,SAAD;AAAW,IAAA,GAAG,EAAExE,WAAW,CAACyE,OAAZ,CAAoB/F,GAApB,CAAwB,UAAAC,CAAC;AAAA,aAAIA,CAAC,CAACqD,MAAF,EAAJ;AAAA,KAAzB,CAAhB;AAA0D,IAAA,SAAS,MAAnE;AAAoE,IAAA,eAAe,EAAE;AAArF,IAFJ,CADH,GAKK,IArBV,CANR,CAvBJ,CAFJ;AA0DH,CA3hBD;;AC/BA,IAAM0C,UAAU,YAAVA,UAAU;AAAA,MAAYC,MAAZ,QAAYA,MAAZ;AAAA,MAAoBC,IAApB,QAAoBA,IAApB;AAAA,MAA0BtE,MAA1B,QAA0BA,MAA1B;AAAA,MAAkCnD,SAAlC,QAAkCA,SAAlC;AAAA,0BAA6C0F,OAA7C;AAAA,MAA6CA,OAA7C,6BAAuD,EAAvD;AAAA,0BAA2DI,OAA3D;AAAA,MAA2DA,OAA3D,6BAAqE,EAArE;AAAA,MAAyE4B,SAAzE,QAAyEA,SAAzE;AAAA,MAAoF9H,IAApF,QAAoFA,IAApF;;AAAA,MAA+F;AAC3G4C,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BzC,SAA5B;;AACA,QAAI,CAACA,SAAL,EAAgB;AACZ,6BAAO,EAAP;AACH;;AAED,QAAIwH,MAAM,IAAIA,MAAM,CAAC7F,MAAP,GAAgB,CAA9B,EAAiC;AAC7B,6BAAO,EAAP;AACH;;AAED,QAAMgG,UAAU,GAAI,OAAO3H,SAAP,KAAqB,UAAtB,GAAoCA,SAAS,CAAC;AAAEJ,MAAAA,IAAI,EAAJA;AAAF,KAAD,CAA7C,GAA0DI,SAA7E;;AACAwC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCkF,UAAtC;;AACA,QAAI,CAACA,UAAL,EAAiB;AACb,6BAAO,EAAP;AACH;;AACD,QAAMtE,KAAK,GAAG,IAAIhB,KAAK,CAAC+D,KAAV,CAAgBuB,UAAhB,CAAd;;AACA,YAAQF,IAAR;AACI,WAAK,MAAL;AACIpE,QAAAA,KAAK,CAACuD,UAAN,CAAiB,WAAjB;AACA;;AACJ;AACIvD,QAAAA,KAAK,CAACsD,SAAN,CAAgB,WAAhB;AACA;AANR;;AAUAe,IAAAA,SAAS,IAAIA,SAAS,CAAC;AAAErE,MAAAA,KAAK,EAALA,KAAF;AAASmE,MAAAA,MAAM,EAANA,MAAT;AAAiBC,MAAAA,IAAI,EAAJA,IAAjB;AAAuBtE,MAAAA,MAAM,EAANA;AAAvB,KAAD,CAAtB;;AAEA,QAAIA,MAAM,KAAK,KAAf,EAAsB;;AAItBE,IAAAA,KAAK,CAACqC,OAAN,CAAcA,OAAd;AACArC,IAAAA,KAAK,CAACyC,OAAN,CAAcA,OAAd;AACA,2BAAOzC,KAAK,CAAC8C,IAAN,EAAP;AACH,GAnCe;AAAA;AAAA;AAAA,CAAhB;;AAqCA,+BAAe,UAAClI,KAAD,EAAW;AACtB,MACIC,MADJ,GAKID,KALJ,CACIC,MADJ;AAAA,MAEIC,oBAFJ,GAKIF,KALJ,CAEIE,oBAFJ;AAAA,MAGIuE,cAEAzE,KALJ,CAIIG,IAJJ;AAAA,MAIYe,KAJZ,eAIYA,KAJZ;AAAA,MAImBd,EAJnB,eAImBA,EAJnB;AAAA,MAI8BC,SAJ9B,eAIuBL,KAJvB;;AAOA,kBAA0BM,QAAQ,CAAC,IAAD,CAAlC;AAAA,MAAOC,KAAP;;AACA,MAAQwB,SAAR,GAA8F1B,SAA9F,CAAQ0B,SAAR;AAAA,2BAA8F1B,SAA9F,CAAmBoH,OAAnB;AAAA,MAAmBA,OAAnB,mCAA6B,EAA7B;AAAA,2BAA8FpH,SAA9F,CAAiCwH,OAAjC;AAAA,MAAiCA,OAAjC,mCAA2C,EAA3C;AAAA,MAA+C4B,SAA/C,GAA8FpJ,SAA9F,CAA+CoJ,SAA/C;AAAA,MAA0D1D,cAA1D,GAA8F1F,SAA9F,CAA0D0F,cAA1D;AAAA,4BAA8F1F,SAA9F,CAA0EsJ,QAA1E;AAAA,MAA0EA,QAA1E,oCAAqF,IAArF;AACA,MAAIhI,IAAI,GAAG1B,MAAM,CAACG,EAAD,CAAjB;;AACA,MAAI,CAACuB,IAAL,EAAW;AACPA,IAAAA,IAAI,GAAGgI,QAAQ,GAAG,EAAH,GAAQ,IAAvB;AACH;;AACD,MAAIV,KAAK,CAACC,OAAN,CAAcvH,IAAd,CAAJ,EAAyB;AACrBA,IAAAA,IAAI,GAAGA,IAAI,CAACuD,MAAL,CAAY,UAAA0E,CAAC;AAAA,aAAIA,CAAJ;AAAA,KAAb,CAAP;AACH;;AAED,MAAMnJ,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,WAAOC,MAAA,GAAaC,KAAb,CAAmB;AACtBM,MAAAA,KAAK,EAAE0I,QAAQ,GAAGjJ,KAAA,EAAH,GAAiBA,MAAA;AADV,KAAnB,CAAP;AAGH,GAJD;;AAMA,MAAMmB,iBAAiB,GAAG,CACtB;AACID,IAAAA,IAAI,EAAE,cADV;AAEII,IAAAA,MAAM,EAAE,OAFZ;AAGI5B,IAAAA,EAAE,EAAE,OAHR;AAIIc,IAAAA,KAAK,EAAEA,KAJX;AAKIlB,IAAAA,KAAK,EAAE;AACH2J,MAAAA,QAAQ,EAARA,QADG;AAEHE,MAAAA,qBAAqB,EAAE,IAFpB;AAGHlE,MAAAA,OAAO;AAAA,YAAW5E,KAAX,SAAWA,KAAX;;AAAA,YAAuB;AAC1B,iBAAOuI,UAAU,CAAC;AAAEC,YAAAA,MAAM,EAAExI,KAAV;AAAiBgB,YAAAA,SAAS,EAATA,SAAjB;AAA4B0F,YAAAA,OAAO,EAAPA,OAA5B;AAAqCI,YAAAA,OAAO,EAAPA,OAArC;AAA8C4B,YAAAA,SAAS,EAATA,SAA9C;AAAyD9H,YAAAA,IAAI,EAAJA;AAAzD,WAAD,CAAjB;AACH,SAFM;AAAA;AAAA;AAAA,OAHJ;AAMHkE,MAAAA,oBAAoB,EAAE,8BAACC,MAAD,EAAS/E,KAAT,EAAmB;AAAE,eAAQ+E,MAAM,CAAC1F,EAAP,KAAcW,KAAK,CAACX,EAA5B;AAAiC,OANzE;AAOH2F,MAAAA,cAAc,EAAdA;AAPG;AALX,GADsB,CAA1B;AAkBA,MAAM7D,aAAa,GAAG;AAClBjB,IAAAA,KAAK,EAAEU;AADW,GAAtB;;AAIA,MAAMQ,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAc;AAClClC,IAAAA,oBAAoB,IAAIA,oBAAoB,CAACkC,QAAQ,CAACnB,KAAV,CAA5C;AACH,GAFD;;AAIA,sBAAO,oBAAC,SAAD;AACH,IAAA,mBAAmB,EAAE,CAACsB,YAAD,CADlB;AAEH,IAAA,aAAa,EAAEL,aAFZ;AAGH,IAAA,gBAAgB,EAAEzB,gBAHf;AAIH,IAAA,iBAAiB,EAAEoB,iBAJhB;AAKH,IAAA,eAAe,EAAEM,eALd;AAMH,IAAA,KAAK,EAAE5B;AANJ,IAAP;AAOH,CAzDD;;ACrCA,aAAe,UAACP,KAAD,EAAW;AACtB,MAAQ4B,IAAR,GAAiB5B,KAAjB,CAAQ4B,IAAR;;AACA,UAAQA,IAAR;AACI,SAAK,YAAL;AACI,aAAOkI,UAAP;;AACJ,SAAK,yBAAL;AACI,aAAOC,uBAAP;;AACJ,SAAK,OAAL;AACI,aAAOC,WAAP;;AACJ,SAAK,QAAL;AACI,aAAOC,MAAP;;AACJ;AACI,aAAO,IAAP;AAVR;AAYH,CAdD;;;;"}